// Route to get all data
app.get('/api/data', async (req, res) => {
  try {
    // Get all tables first
    const tablesResult = await client.query(`
      SELECT table_name 
      FROM information_schema.tables 
      WHERE table_schema = 'public'
    `);
    
    console.log('Available tables:', tablesResult.rows);
    
    // Example: Get data from first table if exists
    if (tablesResult.rows.length > 0) {
      const tableName = tablesResult.rows[0].table_name;
      const result = await client.query(`SELECT * FROM ${tableName} LIMIT 10`);
      res.json({ 
        tables: tablesResult.rows,
        data: result.rows 
      });
    } else {
      res.json({ 
        message: 'No tables found',
        tables: [] 
      });
    }
  } catch (err) {
    console.error('Error fetching data:', err);
    res.status(500).json({ error: err.message });
  }
});

//get the rows of table users
app.get('/api/users', async (req, res) => {
  try {
    const result = await client.query('SELECT * FROM users');
    res.json(result.rows);
  } catch (err) {
    console.error('Error fetching users:', err);
    res.status(500).json({ error: err.message });
  }
});




// Route to execute custom query
app.post('/api/query', async (req, res) => {
  try {
    const { query } = req.body;
    const result = await client.query(query);
    res.json(result.rows);
  } catch (err) {
    console.error('Query error:', err);
    res.status(500).json({ error: err.message });
  }
});



cd 'c:\Users\sorin\Desktop\React app\SorinB'; git add .; git commit -m "Re-set"; git push
